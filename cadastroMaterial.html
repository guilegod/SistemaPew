<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cadastro de Bobinas - Sistema Bundy</title>

    <!-- CSS principal -->
    <link rel="stylesheet" href="./style.css" />
    <link rel="stylesheet" href="./style/cadastro.css" />

    <!-- QR Code JS -->
    <script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>
  </head>

  <body>
    <!-- BOT√ÉO FIXO MENU -->
    <button id="toggleMenu" class="toggle-btn">
      <span class="bar"></span><span class="bar"></span><span class="bar"></span>
    </button>

    <!-- SIDEBAR -->
    <aside class="sidebar" id="sidebar">
      <div class="logo-area">
        <img src="./assets/logo.png" alt="Logo Bundy" class="logo" />
        <h2 class="logo-text">Bundy System</h2>
      </div>
      <nav class="menu">
        <ul>
          <li><a href="index.html">üè† In√≠cio</a></li>
          <li><a href="estoqueCompleto.html">üì¶ Estoque</a></li>
          <li><a href="cadastroMaterial.html" class="active">üßæ Cadastro</a></li>
          <li><a href="cordenacao.html">üìä Coordena√ß√£o</a></li>
          <li><a href="scanner.html">üì∑ Scanner</a></li>
        </ul>
      </nav>
    </aside>

    <!-- CONTE√öDO -->
    <main class="content">
      <h1>üßæ Cadastro de Bobinas</h1>
      <p>Registre uma nova bobina com rastreamento autom√°tico, turno e linha identificados.</p>

      <form id="formEstoque" class="form-estoque">
        <!-- Rastro -->
        <div class="input-group">
          <label for="rastro">Rastro:</label>
          <input type="text" id="rastro" placeholder="Rastro" required />
        </div>

        <!-- Data -->
        <div class="input-group">
          <label for="data">Data:</label>
          <input type="date" id="data" required />
        </div>

        <!-- Turno (preenchido automaticamente) -->
        <div class="input-group">
          <label for="turno">Turno:</label>
          <input type="text" id="turno" readonly />
        </div>

        <!-- Operador -->
        <div class="input-group">
          <label for="operador">Operador:</label>
          <select id="operador" required>
            <option value="">Selecione o Operador</option>
            <option value="4172 - Marco">4172 - Marco (Linha 01)</option>
            <option value="4181 - Milton">4181 - Milton (Linha 01)</option>
            <option value="4233 - Gabriel">4233 - Gabriel (Linha 02)</option>
            <option value="4290 - Dirceu">4290 - Dirceu (Linha 02)</option>
          </select>
        </div>

        <!-- Linha de produ√ß√£o -->
        <div class="input-group">
          <label for="linha">Linha de Produ√ß√£o:</label>
          <input type="text" id="linha" readonly placeholder="Definida automaticamente" />
        </div>

        <!-- Tipo -->
        <div class="input-group">
          <label for="tipo">Tipo:</label>
          <select id="tipo" required>
            <option value="">Selecione</option>
            <option value="PEWQ">PEWQ</option>
            <option value="PEWS">PEWS</option>
          </select>
        </div>

        <!-- Di√¢metro -->
        <div class="input-group">
          <label for="diametro">Di√¢metro:</label>
          <select id="diametro" required>
            <option value="">Selecione</option>
            <option value="4.00">4.00</option>
            <option value="4.76">4.76</option>
          </select>
        </div>

        <!-- Comprimento -->
        <div class="input-group">
          <label for="comprimento">Comprimento (mm):</label>
          <input type="number" id="comprimento" required />
        </div>

        <!-- Peso -->
        <div class="input-group">
          <label for="peso">Peso (kg):</label>
          <input type="number" id="peso" step="0.01" required />
        </div>

        <!-- Furos -->
        <div class="input-group">
          <label for="furos">Furos:</label>
          <input type="number" id="furos" required />
        </div>

        <!-- Observa√ß√µes -->
        <div class="input-group">
          <label for="observacoes">Observa√ß√µes:</label>
          <textarea id="observacoes" placeholder="Observa√ß√µes (opcional)"></textarea>
        </div>

        <!-- Status (oculto - definido automaticamente como ‚ÄúAguardando Laudo‚Äù) -->
        <input type="hidden" id="status" value="Aguardando Laudo" />

        <!-- Bot√µes -->
        <div class="button-area">
          <button type="submit" class="btn salvar">üíæ Salvar Bobina</button>
          <button type="reset" class="btn limpar">üßπ Limpar</button>
        </div>
      </form>

      <!-- QR Code Gerado -->
      <div id="qrContainer" style="text-align:center; margin-top:25px;"></div>
    </main>

    <!-- Scripts -->
    <script src="./script/menu.js"></script>
    <script>
      // === Turno autom√°tico com base na hora atual ===
      function identificarTurno() {
        const hora = new Date().getHours();
        if (hora >= 6 && hora < 14) return "1¬∫ Turno";
        if (hora >= 14 && hora < 22) return "2¬∫ Turno";
        return "3¬∫ Turno";
      }

      // === Linha autom√°tica com base no operador ===
      const operadoresLinha = {
        "4172 - Marco": "Linha 01",
        "4181 - Milton": "Linha 01",
        "4233 - Gabriel": "Linha 02",
        "4290 - Dirceu": "Linha 02"
      };

      document.addEventListener("DOMContentLoaded", () => {
        const turnoInput = document.getElementById("turno");
        const operadorSelect = document.getElementById("operador");
        const linhaInput = document.getElementById("linha");

        // Define o turno automaticamente
        turnoInput.value = identificarTurno();

        // Define a linha conforme o operador
        operadorSelect.addEventListener("change", () => {
          const valor = operadorSelect.value;
          linhaInput.value = operadoresLinha[valor] || "N√£o definida";
        });

        // Data atual autom√°tica
        const dataInput = document.getElementById("data");
        const hoje = new Date().toISOString().split("T")[0];
        dataInput.value = hoje;
      });
    </script>
    <script src="./script/cadastroMaterial.js"></script>
  </body>
</html>
